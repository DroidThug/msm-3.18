From 24018234f841378e8e08f5957e774fb70ae0430e Mon Sep 17 00:00:00 2001
From: lnxbuild <lnxbuild@localhost>
Date: Mon, 12 Aug 2013 21:14:19 +0800
Subject: [PATCH 02/22] add lcd dtsi to enable display in order to fix zygote
 restart issue

Change-Id: I0b914e3c8eefd912e31287c9756d9a46f0077f12
---
 .../boot/dts/dsi-v2-panel-otm9605a-qhd-video.dtsi  |  150 ++++++++++++++++++++
 arch/arm/boot/dts/msm8610-v1-qrd-skuac.dts         |   11 +-
 2 files changed, 156 insertions(+), 5 deletions(-)
 create mode 100755 arch/arm/boot/dts/dsi-v2-panel-otm9605a-qhd-video.dtsi

diff --git a/arch/arm/boot/dts/dsi-v2-panel-otm9605a-qhd-video.dtsi b/arch/arm/boot/dts/dsi-v2-panel-otm9605a-qhd-video.dtsi
new file mode 100755
index 0000000..da3e18e
--- /dev/null
+++ b/arch/arm/boot/dts/dsi-v2-panel-otm9605a-qhd-video.dtsi
@@ -0,0 +1,150 @@
+/* Copyright (c) 2013, The Linux Foundation. All rights reserved.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 and
+ * only version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+/ {
+	qcom,dsi_v2_otm9605a_qhd_video {
+		compatible = "qcom,dsi-panel-v2";
+		label = "OTM9605A QHD video mode dsi panel";
+		qcom,dsi-ctrl-phandle = <&mdss_dsi0>;
+		qcom,rst-gpio = <&msmgpio 41 0>;
+		vdda-supply = <&pm8110_l19>;
+		vddio-supply=<&pm8110_l14>;
+		qcom,mdss-pan-res = <540 960>;
+		qcom,mdss-pan-bpp = <24>;
+		qcom,mdss-pan-dest = "display_1";
+		qcom,mdss-pan-porch-values = <100 4 100 32 2 32>;
+		qcom,mdss-pan-underflow-clr = <0xff>;
+		qcom,mdss-pan-bl-levels = <1 255>;
+		qcom,mdss-pan-bl-ctrl = "bl_ctrl_wled";
+		qcom,mdss-pan-dsi-mode = <0>;
+		qcom,mdss-pan-dsi-h-pulse-mode = <1>;
+		qcom,mdss-pan-dsi-h-power-stop = <1 1 1>;
+		qcom,mdss-pan-dsi-bllp-power-stop = <1 1>;
+		qcom,mdss-pan-dsi-traffic-mode = <2>;
+		qcom,mdss-pan-dsi-dst-format = <3>;
+		qcom,mdss-pan-dsi-vc = <0>;
+		qcom,mdss-pan-dsi-rgb-swap = <0>;
+		qcom,mdss-pan-dsi-data-lanes = <1 1 0 0>;
+		qcom,mdss-pan-dsi-dlane-swap = <1>;
+		qcom,mdss-pan-dsi-t-clk = <0x1b 0x04>;
+		qcom,mdss-pan-dsi-stream = <0>;
+		qcom,mdss-pan-dsi-mdp-tr = <0x04>;/*todo*/
+		qcom,mdss-pan-dsi-dma-tr = <0x04>;
+		qcom,mdss-pan-dsi-frame-rate = <60>;
+		qcom,panel-phy-regulatorSettings =[09 08 05 00 20 03];
+		qcom,panel-phy-timingSettings = [8B 1F 14  00 45 4A
+						 19 23 23  03 04 00];
+		qcom,panel-phy-strengthCtrl = [ff 06];
+		qcom,panel-phy-bistCtrl = [03 03 00 00 0f 00];
+		qcom,panel-phy-laneConfig =
+					[80 45 00 00 01 66 /*lane0**/
+					80 45 00 00 01 66 /*lane1*/
+					80 45 00 00 01 66 /*lane2*/
+					80 45 00 00 01 66 /*lane3*/
+					40 67 00 00 01 88]; /*Clk*/
+
+		qcom,on-cmds-dsi-state = "DSI_LP_MODE";
+		qcom,panel-on-cmds = [39 01 00 00 01 02 00 00
+					39 01 00 00 01 04 FF 96 05 01
+					39 01 00 00 01 02 00 80
+					39 01 00 00 01 03 FF 96 05
+					39 01 00 00 01 02 00 90
+					39 01 00 00 01 02 00 00
+					39 01 00 00 01 02 A0 00
+					39 01 00 00 01 02 00 B4
+					39 01 00 00 01 02 C0 50
+					39 01 00 00 01 02 00 80
+					39 01 00 00 01 03 C1 36 66
+					39 01 00 00 01 02 00 89
+					39 01 00 00 01 02 C0 01
+					39 01 00 00 01 02 00 80
+					39 01 00 00 01 02 C4 9C
+					39 01 00 00 01 02 00 A0
+					39 01 00 00 01 02 C1 00
+					39 01 00 00 01 02 00 C0
+					39 01 00 00 01 02 C5 00
+					39 01 00 00 01 02 00 C5
+					39 01 00 00 01 02 B0 03
+					39 01 00 00 01 02 00 90      
+					39 01 00 00 01 08 c5 96 19 01 79 33 33 34
+					39 01 00 00 01 02 00 A0
+					39 01 00 00 01 08 C5 96 16 00 79 33 33 34
+					39 01 00 00 01 02 00 00
+					39 01 00 00 01 03 D8 5F 5F
+					39 01 00 00 01 02 00 00
+					39 01 00 00 01 02 D9 3b
+					39 01 00 00 01 02 00 B0
+					39 01 00 00 01 03 C5 04 28
+					39 01 00 00 01 02 00 00
+					39 01 00 00 01 11 E1 01 0D 14 0E 07 13 0B 0A 02 06 08 08 0e 12 0d 01
+					39 01 00 00 01 02 00 00
+					39 01 00 00 01 11 E2 01 0D 14 0E 07 13 0B 0A 02 06 08 08 0e 12 0d 01
+					39 01 00 00 01 02 00 80
+					39 01 00 00 01 0B CB 05 00 00 00 00 05 00 00 00 00
+					39 01 00 00 01 02 00 90
+					39 01 00 00 01 10 CB 55 55 00 00 00 00 00 00 00 00 00 00 00 00 00
+					39 01 00 00 01 02 00 A0
+					39 01 00 00 01 10 CB 00 00 00 00 00 55 55 00 00 00 00 00 00 00 00
+					39 01 00 00 01 02 00 B0
+					39 01 00 00 01 0B CB 00 00 00 00 00 00 00 00 00 00
+					39 01 00 00 01 02 00 C0
+					39 01 00 00 01 10 CB 55 55 00 00 00 04 00 04 00 04 00 04 04 04 00
+					39 01 00 00 01 02 00 D0
+					39 01 00 00 01 10 CB 04 00 00 00 00 55 55 00 00 00 04 00 04 00 04
+					39 01 00 00 01 02 00 E0
+					39 01 00 00 01 0B CB 00 04 04 04 00 04 00 00 00 00
+					39 01 00 00 01 02 00 F0
+					39 01 00 00 01 0B CB 0F 00 CC 00 00 0F 00 CC C3 00
+					39 01 00 00 01 02 00 80
+					39 01 00 00 01 0B CC 25 26 00 00 00 0C 00 0A 00 10
+					39 01 00 00 01 02 00 90
+					39 01 00 00 01 10 CC 00 0E 02 04 00 06 00 00 00 00 25 26 00 00 00
+					39 01 00 00 01 02 00 A0
+					39 01 00 00 01 10 CC 0B 00 09 00 0F 00 0D 01 03 00 05 00 00 00 00
+					39 01 00 00 01 02 00 B0
+					39 01 00 00 01 0B CC 26 25 00 00 00 0D 00 0F 00 09
+					39 01 00 00 01 02 00 C0
+					39 01 00 00 01 10 CC 00 0B 03 01 00 05 00 00 00 00 26 25 00 00 00
+					39 01 00 00 01 02 00 D0
+					39 01 00 00 01 10 CC 0E 00 10 00 0A 00 0C 04 02 00 06 00 00 00 00
+					39 01 00 00 01 02 00 80
+					39 01 00 00 01 0D CE 8B 03 27 8A 03 28 89 03 27 88 03 28
+					39 01 00 00 01 02 00 90
+					39 01 00 00 01 0F CE 39 0F 27 39 0E 28 00 00 00 00 00 00 00 00
+					39 01 00 00 01 02 00 A0
+					39 01 00 00 01 0F CE 38 07 03 C0 00 28 00 38 06 03 C1 00 28 00
+					39 01 00 00 01 02 00 B0
+					39 01 00 00 01 0F CE 38 05 03 C2 00 28 00 38 04 03 C3 00 28 00
+					39 01 00 00 01 02 00 C0
+					39 01 00 00 01 0F CE 38 03 03 C4 00 28 00 38 02 03 C5 00 28 00
+					39 01 00 00 01 02 00 D0
+					39 01 00 00 01 0F CE 38 01 03 C6 00 28 00 38 00 03 C7 00 28 00
+					39 01 00 00 01 02 00 80
+					39 01 00 00 01 0F CF F0 00 00 10 00 00 00 F0 00 00 10 00 00 00
+					39 01 00 00 01 02 00 90
+					39 01 00 00 01 0F CF F0 00 00 10 00 00 00 F0 00 00 10 00 00 00
+					39 01 00 00 01 02 00 A0
+					39 01 00 00 01 0F CF F0 00 00 10 00 00 00 F0 00 00 10 00 00 00
+					39 01 00 00 01 02 00 B0
+					39 01 00 00 01 0F CF F0 00 00 10 00 00 00 F0 00 00 10 00 00 00
+					39 01 00 00 01 02 00 C0
+					39 01 00 00 01 0B CF 01 01 20 20 00 00 02 01 00 00
+					39 01 00 00 01 02 00 00
+					39 01 00 00 01 04 FF FF FF FF
+					39 01 00 00 01 02 35 01
+					05 01 00 00 7D 02 11 00
+					05 01 00 00 32 02 29 00];
+		qcom,panel-off-cmds = [05 01 00 00 32 02 28 00
+					05 01 00 00 78 02 10 00];
+		qcom,off-cmds-dsi-state = "DSI_LP_MODE";
+	};
+};
diff --git a/arch/arm/boot/dts/msm8610-v1-qrd-skuac.dts b/arch/arm/boot/dts/msm8610-v1-qrd-skuac.dts
index f03e19e..4de516c 100644
--- a/arch/arm/boot/dts/msm8610-v1-qrd-skuac.dts
+++ b/arch/arm/boot/dts/msm8610-v1-qrd-skuac.dts
@@ -14,12 +14,13 @@
 
 /include/ "msm8610-v1.dtsi"
 /include/ "msm8610-qrd.dtsi"
+/include/ "dsi-v2-panel-otm9605a-qhd-video.dtsi"
 
 / {
-        model = "Qualcomm MSM 8610 QRD";
-        compatible = "qcom,msm8610-qrd", "qcom,msm8610", "qcom,qrd";
-        qcom,board-id = <11 4>;
-        qcom,msm-id = <147 0>, <165 0>, <161 0>, <162 0>,
-                                  <163 0>, <164 0>, <166 0>;
+	model = "Qualcomm MSM 8610 QRD";
+	compatible = "qcom,msm8610-qrd", "qcom,msm8610", "qcom,qrd";
+	qcom,board-id = <11 4>;
+	qcom,msm-id = <147 0>, <165 0>, <161 0>, <162 0>,
+				  <163 0>, <164 0>, <166 0>;
 };
 
-- 
1.7.8.3

